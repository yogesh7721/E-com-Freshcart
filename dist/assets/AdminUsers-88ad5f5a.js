import{r as t,h as S,i as v,k as A,l as _,B as l,j as e}from"./index-44156e21.js";import{u as h}from"./formik.esm-b322b639.js";import{c as f,a as d}from"./index.esm-2fd682e7.js";const L=()=>{const[n,j]=t.useState({}),a=h({enableReinitialize:!0,initialValues:{name:n.name,email:n.email},validationSchema:f({name:d().required("Enter Name"),email:d().email().required("Enter email")}),onSubmit:(s,{resetForm:o})=>{w({...s,_id:n._id}),o()}}),r=h({initialValues:{name:"",email:""},validationSchema:f({name:d().required("Enter Name"),email:d().email().required("Enter email"),password:d().required("Enter Password")}),onSubmit:(s,{resetForm:o})=>{N(s),o()}}),{data:i}=S(),[N,{isSuccess:c,isError:m,isLoading:D,error:g}]=v(),[w,{isSuccess:u,isError:b,isLoading:M,error:E}]=A(),[y,{isSuccess:p,isError:x,isLoading:k,error:U}]=_();return t.useEffect(()=>{c&&(l.success("User Add Success"),window.my_modal_1.close())},[c]),t.useEffect(()=>{m&&l.error(g.message||"Unable TO Add User")},[m]),t.useEffect(()=>{u&&(l.warn("User Update Success"),window.editModal.close())},[u]),t.useEffect(()=>{b&&l.error(E.message||"Unable To Update ")},[b]),t.useEffect(()=>{p&&l.warn("User Delete Success")},[p]),t.useEffect(()=>{x&&l.error(U.message||"Unable to Delete")},[x]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mx-20",children:[e.jsx("div",{className:"text-right my-10",children:e.jsx("button",{onClick:()=>document.getElementById("my_modal_1").showModal(),className:"btn btn-primary",children:"+ ADD User"})}),e.jsx("div",{className:"overflow-x-auto bg-teal-200 mt-10",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"hover:bg-blue-400",children:[e.jsx("th",{className:"text-black text-center border border-black font-bold",children:"Name"}),e.jsx("th",{className:"text-black text-center border border-black font-bold",children:"Email"}),e.jsx("th",{className:"text-black text-center border border-black font-bold",children:"Role"}),e.jsx("th",{className:"text-black text-center border border-black font-bold",children:"Actions"})]})}),e.jsx("tbody",{children:i&&i.map(s=>e.jsxs("tr",{className:"hover:bg-yellow-200",children:[e.jsx("td",{className:"text-black uppercase text-center border border-black font-bold",children:s.name}),e.jsx("td",{className:"text-black text-center border border-black font-bold",children:s.email}),e.jsx("td",{className:"text-black text-center border border-black font-bold",children:s.role}),e.jsxs("td",{className:"text-black text-center border font-bold flex justify-center gap-5",children:[e.jsx("button",{onClick:()=>{j(s),window.editModal.showModal()},className:"btn btn-warning",children:"Edit"}),e.jsx("button",{onClick:o=>y(s._id),className:"btn btn-error",children:k?e.jsx("span",{children:e.jsx("span",{className:"loading loading-spinner loading-md"})}):"Delete"})]})]},s._id))})]})}),e.jsx("dialog",{id:"editModal",className:"modal",children:e.jsxs("form",{method:"dialog",className:"modal-box bg-slate-600",onSubmit:a.handleSubmit,children:[e.jsx("input",{...a.getFieldProps("name"),type:"text",placeholder:"Type here",name:"name",className:`input input-bordered w-full  my-2 ${a.errors.name&&a.touched.name&&"input-error"}`}),e.jsx("input",{...a.getFieldProps("email"),type:"text",name:"email",placeholder:"Type here",className:`input input-bordered w-full my-2 ${a.errors.email&&a.touched.email&&"input-error"}`}),e.jsx("button",{type:"submit",className:"btn btn-warning w-full",children:"Update"})]})}),e.jsx("dialog",{id:"my_modal_1",className:"modal",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Hello!"}),e.jsx("p",{className:"py-4",children:"Press ESC key or click the button below to close"}),e.jsx("div",{className:"modal-action",children:e.jsxs("form",{method:"dialog",onSubmit:r.handleSubmit,children:[e.jsx("input",{...r.getFieldProps("name"),type:"text",placeholder:"Enter Name ",name:"name",className:`input input-bordered w-full  my-2 ${r.errors.name&&r.touched.name&&"input-error"}`}),e.jsx("input",{...r.getFieldProps("email"),type:"text",name:"email",placeholder:"Enter Email",className:`input input-bordered w-full  my-2 ${r.errors.email&&r.touched.email&&"input-error"}`}),e.jsx("input",{...r.getFieldProps("password"),type:"text",name:"password",placeholder:"Enter password",className:`input input-bordered w-full  my-2 ${r.errors.password&&r.touched.password&&"input-error"}`}),e.jsx("button",{type:"submit",className:"btn btn-warning w-full",children:"ADD User"})]})})]})})]})})};export{L as default};
